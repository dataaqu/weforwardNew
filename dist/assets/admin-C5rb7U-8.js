var z=Object.defineProperty;var O=(r,t,s)=>t in r?z(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var T=(r,t,s)=>O(r,typeof t!="symbol"?t+"":t,s);import{j as e,m as d}from"./ui-vendor-Ccc-FHxb.js";import{r as m,u as I,a as W,L as f,N as M}from"./router-vendor-CBKEtYzT.js";import{i as U,g as G,a as H,b as V,s as P,c as J,d as S,e as D,u as Q,f as Y,q as F,o as Z,h as $,w as L,j as X,r as _,k as ee,l as te,m as se,n as re,p as ae,t as oe}from"./firebase-vendor-DysxmUEP.js";const B="/assets/logo-CPVG9LYr.png",ie={apiKey:"AIzaSyAKAW0nAicwoObIaFJ4RrUbsunmmqLzq9U",authDomain:"weforward-blogpage.firebaseapp.com",projectId:"weforward-blogpage",storageBucket:"weforward-blogpage.firebasestorage.app",messagingSenderId:"429074555361",appId:"1:429074555361:web:e4c8f52a5d7acc05aeb2a0"},K=U(ie),j=G(K),E=H(K),q=V(K);class le{constructor(){T(this,"collectionName","blogPosts")}async createBlogPost(t){try{const s={...t,createdAt:P(),updatedAt:P(),publishedAt:t.published?P():null};return(await J(S(j,this.collectionName),s)).id}catch(s){throw console.error("Error creating blog post:",s),s.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):s.code==="unavailable"?new Error("Firestore is currently unavailable. Please try again later."):s.code==="invalid-argument"?new Error("Invalid data provided. Please check your form inputs."):new Error(`Failed to create blog post: ${s.message||s}`)}}async updateBlogPost(t,s){try{const i=D(j,this.collectionName,t);await Q(i,{...s,updatedAt:P(),publishedAt:s.published&&!s.publishedAt?P():s.publishedAt})}catch(i){throw console.error("Error updating blog post:",i),new Error(`Failed to update blog post: ${i}`)}}async deleteBlogPost(t){try{await Y(D(j,this.collectionName,t))}catch(s){throw console.error("Error deleting blog post:",s),new Error(`Failed to delete blog post: ${s}`)}}async getAllBlogPosts(){try{const t=F(S(j,this.collectionName),Z("createdAt","desc"));return(await $(t)).docs.map(a=>this.convertFirestoreDoc(a))}catch(t){throw console.error("Error fetching all blog posts:",t),new Error(`Failed to fetch all blog posts: ${t.message||t}`)}}async getPublishedBlogPosts(t){try{let s=F(S(j,this.collectionName),L("published","==",!0));const a=(await $(s)).docs.map(c=>this.convertFirestoreDoc(c));return a.sort((c,n)=>{const o=c.publishedAt?c.publishedAt.getTime():0;return(n.publishedAt?n.publishedAt.getTime():0)-o}),t?a.slice(0,t):a}catch(s){throw console.error("Error fetching published blog posts:",s),new Error(`Failed to fetch published blog posts: ${s.message||s}`)}}async getBlogPost(t){try{const s=D(j,this.collectionName,t),i=await X(s);return i.exists()?this.convertFirestoreDoc(i):null}catch(s){throw console.error("Error fetching blog post:",s),new Error(`Failed to fetch blog post: ${s}`)}}async getBlogPostBySlug(t){try{const s=F(S(j,this.collectionName),L("slug","==",t),L("published","==",!0)),i=await $(s);return i.empty?null:this.convertFirestoreDoc(i.docs[0])}catch(s){throw console.error("Error fetching blog post by slug:",s),new Error(`Failed to fetch blog post: ${s.message||s}`)}}async uploadImage(t,s){try{if(!t)throw new Error("No file provided");if(t.size>10*1024*1024)throw new Error("File size too large. Maximum 10MB allowed.");if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(t.type))throw new Error("Invalid file type. Only JPEG, PNG, WebP, and GIF are allowed.");const l=`${Date.now()}-${t.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,c=`blog-images/${s}/${l}`,n=_(q,c),o=await ee(n,t);return await te(o.ref)}catch(i){throw console.error("Error uploading image:",i),i.code==="storage/unauthorized"?new Error("Permission denied. Please check your Firebase Storage security rules."):i.code==="storage/quota-exceeded"?new Error("Storage quota exceeded. Please contact administrator."):i.code==="storage/unauthenticated"?new Error("Not authenticated. Please log in again."):new Error(`Failed to upload image: ${i.message||i}`)}}async deleteImage(t){try{const s=_(q,t);await se(s)}catch(s){console.error("Error deleting image:",s)}}convertFirestoreDoc(t){var i,a,l;const s=t.data();return{id:t.id,...s,createdAt:((i=s.createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((a=s.updatedAt)==null?void 0:a.toDate())||new Date,publishedAt:((l=s.publishedAt)==null?void 0:l.toDate())||null}}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}calculateReadTime(t){const i=t.replace(/<[^>]+>/g,"").split(/\s+/).length;return Math.ceil(i/200)}}const y=new le;class ne{async loginAdmin(t,s){try{return(await re(E,t,s)).user}catch(i){throw console.error("Login error:",i),new Error(`Login failed: ${i.message}`)}}async logout(){try{await ae(E)}catch(t){throw console.error("Logout error:",t),new Error(`Logout failed: ${t.message}`)}}isAdmin(t){return t?["admin@weforward.ge","datiobashvili1@gmail.com"].includes(t.email||""):!1}onAuthStateChange(t){return oe(E,t)}getCurrentUser(){return E.currentUser}}const v=new ne,ce=()=>{const[r,t]=m.useState(""),[s,i]=m.useState(""),[a,l]=m.useState(!1),[c,n]=m.useState(""),o=I(),u=async h=>{h.preventDefault(),l(!0),n("");try{const p=await v.loginAdmin(r,s);v.isAdmin(p)?o("/admin"):(n("Access denied. Admin privileges required."),await v.logout())}catch(p){n(p.message||"Login failed")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"mx-auto w-16 h-16 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] rounded-2xl flex items-center justify-center mb-6",children:e.jsx("img",{src:B,alt:"WeForward Logo",className:"w-10 h-10 object-contain"})}),e.jsx(d.h2,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-3xl font-bold text-gray-900",children:"Admin Login"}),e.jsx(d.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-2 text-sm text-gray-600",children:"Sign in to access the WeForward admin panel"})]}),e.jsxs(d.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},onSubmit:u,className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[c&&e.jsx(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:c}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:h=>t(h.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Admin mail"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Enter your password"})]})]}),e.jsx("div",{children:e.jsx(d.button,{type:"submit",disabled:a,whileHover:{scale:a?1:1.02},whileTap:{scale:a?1:.98},className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-[#309f69] to-[#2ff9c3] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#309f69] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in to Admin Panel"})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Protected area. Admin access only."})})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-400",children:"¬© 2025 WeForward LLC. All rights reserved."})})]})})},we=Object.freeze(Object.defineProperty({__proto__:null,AdminLogin:ce},Symbol.toStringTag,{value:"Module"})),N=({children:r})=>{const t=W(),s=I(),i=async()=>{try{await v.logout(),s("/admin/login")}catch(l){console.error("Logout error:",l),alert("Failed to logout")}},a=[{name:"Dashboard",href:"/admin",icon:"üìä",description:"Overview & Analytics"},{name:"All Posts",href:"/admin/posts",icon:"üìù",description:"Manage Blog Posts"},{name:"New Post",href:"/admin/posts/new",icon:"‚ûï",description:"Create New Article"},{name:"Categories",href:"/admin/categories",icon:"üìÅ",description:"Manage Categories"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl border-r border-gray-200",children:[e.jsx("div",{className:"flex h-16 items-center justify-center bg-gradient-to-r from-[#309f69] to-[#2ff9c3] relative",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:B,alt:"WeForward Logo",className:"w-8 h-8 object-contain"}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"})]})}),e.jsx("nav",{className:"mt-8 px-4 space-y-2",children:a.map((l,c)=>e.jsx(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:c*.1},children:e.jsxs(f,{to:l.href,className:`group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${t.pathname===l.href?"bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white shadow-lg":"text-gray-700 hover:bg-gray-100 hover:text-[#309f69]"}`,children:[e.jsx("span",{className:"mr-3 text-lg",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:l.name}),e.jsx("div",{className:`text-xs ${t.pathname===l.href?"text-white/80":"text-gray-500 group-hover:text-[#309f69]/80"}`,children:l.description})]})]})},l.name))}),e.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-3 px-4 py-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] rounded-full flex items-center justify-center text-white font-bold text-sm",children:"A"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Admin"}),e.jsx("div",{className:"text-xs text-gray-500",children:"WeForward Admin"})]})]}),e.jsxs(d.button,{onClick:i,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:[e.jsx("span",{className:"mr-3",children:"üö™"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),e.jsx("div",{className:"ml-64",children:e.jsx("main",{className:"p-8",children:r})})]})},de=()=>{const[r,t]=m.useState([]),[s,i]=m.useState(!0),[a,l]=m.useState({totalPosts:0,publishedPosts:0,draftPosts:0,featuredPosts:0});m.useEffect(()=>{(async()=>{try{const o=await y.getAllBlogPosts();t(o);const u=o.length,h=o.filter(b=>b.published).length,p=o.filter(b=>!b.published).length,C=o.filter(b=>b.featured).length;l({totalPosts:u,publishedPosts:h,draftPosts:p,featuredPosts:C})}catch(o){console.error("Error fetching dashboard data:",o)}finally{i(!1)}})()},[]);const c=[{title:"Total Posts",value:a.totalPosts,icon:"üìù",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"Published",value:a.publishedPosts,icon:"‚úÖ",color:"from-green-500 to-green-600",bgColor:"bg-green-50",textColor:"text-green-600"},{title:"Drafts",value:a.draftPosts,icon:"üìÑ",color:"from-yellow-500 to-yellow-600",bgColor:"bg-yellow-50",textColor:"text-yellow-600"},{title:"Featured",value:a.featuredPosts,icon:"‚≠ê",color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",textColor:"text-purple-600"}];return s?e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-[#309f69]"})})}):e.jsx(N,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(d.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx(d.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mt-2 text-gray-600",children:"Welcome to the WeForward blog admin panel"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((n,o)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:n.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n.value})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg ${n.bgColor} flex items-center justify-center`,children:e.jsx("span",{className:"text-2xl",children:n.icon})})]})},n.title))}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(f,{to:"/admin/posts/new",className:"flex items-center p-4 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white rounded-lg hover:shadow-lg transition-shadow duration-200",children:[e.jsx("span",{className:"text-2xl mr-3",children:"‚ûï"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Create New Post"}),e.jsx("div",{className:"text-sm opacity-90",children:"Write a new blog article"})]})]}),e.jsxs(f,{to:"/admin/posts",className:"flex items-center p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200",children:[e.jsx("span",{className:"text-2xl mr-3",children:"üìù"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Manage Posts"}),e.jsx("div",{className:"text-sm opacity-75",children:"Edit existing articles"})]})]}),e.jsxs(f,{to:"/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200",children:[e.jsx("span",{className:"text-2xl mr-3",children:"üåê"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"View Website"}),e.jsx("div",{className:"text-sm opacity-75",children:"See live blog page"})]})]})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Posts"}),e.jsx(f,{to:"/admin/posts",className:"text-[#309f69] hover:text-[#277a57] font-medium text-sm",children:"View All ‚Üí"})]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üìù"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first blog post to get started"}),e.jsxs(f,{to:"/admin/posts/new",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white rounded-lg hover:shadow-lg transition-shadow duration-200",children:[e.jsx("span",{className:"mr-2",children:"‚ûï"}),"Create First Post"]})]}):e.jsx("div",{className:"space-y-4",children:r.slice(0,5).map((n,o)=>e.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7+o*.1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:n.title}),e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 ${n.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:n.published?"‚úÖ Published":"üìÑ Draft"}),e.jsx("span",{children:n.createdAt.toLocaleDateString()}),n.featured&&e.jsx("span",{className:"ml-2 text-yellow-500",children:"‚≠ê"})]})]}),e.jsx(f,{to:`/admin/posts/edit/${n.id}`,className:"ml-4 px-3 py-1 text-sm text-[#309f69] hover:bg-[#309f69] hover:text-white rounded transition-colors duration-200",children:"Edit"})]},n.id))})]})]})})},je=Object.freeze(Object.defineProperty({__proto__:null,AdminDashboard:de},Symbol.toStringTag,{value:"Module"})),me=()=>{const[r,t]=m.useState([]),[s,i]=m.useState(!0),[a,l]=m.useState("all");m.useEffect(()=>{(async()=>{try{const u=await y.getAllBlogPosts();t(u)}catch(u){console.error("Error fetching posts:",u)}finally{i(!1)}})()},[]);const c=async o=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone."))try{await y.deleteBlogPost(o),t(r.filter(u=>u.id!==o))}catch(u){console.error("Error deleting post:",u),alert("Failed to delete post")}},n=r.filter(o=>a==="published"?o.published:a==="draft"?!o.published:!0);return s?e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-[#309f69]"})})}):e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Blog Posts"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your blog articles"})]}),e.jsxs(f,{to:"/admin/posts/new",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white rounded-lg hover:shadow-lg transition-shadow duration-200",children:[e.jsx("span",{className:"mr-2",children:"‚ûï"}),"New Post"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Posts"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(o=>o.published).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Published"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.filter(o=>!o.published).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Drafts"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${a==="all"?"bg-[#309f69] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All Posts (",r.length,")"]}),e.jsxs("button",{onClick:()=>l("published"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${a==="published"?"bg-[#309f69] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Published (",r.filter(o=>o.published).length,")"]}),e.jsxs("button",{onClick:()=>l("draft"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${a==="draft"?"bg-[#309f69] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Drafts (",r.filter(o=>!o.published).length,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üìù"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a==="all"?"No posts yet":`No ${a} posts`}),e.jsx("p",{className:"text-gray-600 mb-4",children:a==="all"?"Create your first blog post to get started":`No posts in ${a} status`}),a==="all"&&e.jsxs(f,{to:"/admin/posts/new",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white rounded-lg hover:shadow-lg transition-shadow duration-200",children:[e.jsx("span",{className:"mr-2",children:"‚ûï"}),"Create First Post"]})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:n.map((o,u)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.05},className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:o.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:o.published?"‚úÖ Published":"üìÑ Draft"}),o.featured&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"‚≠ê Featured"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:o.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["By ",o.author]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:o.category}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[o.readTime," min read"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:o.createdAt.toLocaleDateString()})]})]}),o.featuredImage&&e.jsx("div",{className:"ml-6 w-24 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:o.featuredImage,alt:o.title,className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-100",children:[o.published&&e.jsx(f,{to:`/blog/${o.slug}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors duration-200",children:"View"}),e.jsx("button",{onClick:()=>c(o.id),className:"inline-flex items-center px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded transition-colors duration-200",children:"Delete"})]})]},o.id))})})]})})},ve=Object.freeze(Object.defineProperty({__proto__:null,AdminPosts:me},Symbol.toStringTag,{value:"Module"})),ge=({post:r,onSave:t,onCancel:s,loading:i=!1})=>{const[a,l]=m.useState({title:"",titleKa:"",content:"",contentKa:"",excerpt:"",excerptKa:"",author:"WEFORWARD",authorKa:"WEFORWARD",category:"",categoryKa:"",tags:[],tagsKa:[],published:!0,featured:!1,slug:"",metaDescription:"",metaDescriptionKa:"",featuredImage:"",readTime:0}),[c,n]=m.useState(null),[o,u]=m.useState(""),[h,p]=m.useState(!1);m.useEffect(()=>{r&&(l({title:r.title,titleKa:r.titleKa,content:r.content,contentKa:r.contentKa,excerpt:r.excerpt,excerptKa:r.excerptKa,author:r.author,authorKa:r.authorKa,category:r.category,categoryKa:r.categoryKa,tags:r.tags,tagsKa:r.tagsKa,published:r.published,featured:r.featured,slug:r.slug,metaDescription:r.metaDescription,metaDescriptionKa:r.metaDescriptionKa,featuredImage:r.featuredImage,readTime:r.readTime}),u(r.featuredImage))},[r]);const C=async x=>{x.preventDefault(),console.log("üöÄ Starting blog post submission..."),console.log("üìù Form data:",a);try{if(!a.title.trim()){alert("English title is required");return}if(!a.titleKa.trim()){alert("Georgian title is required");return}if(!a.content.trim()){alert("English content is required");return}if(!a.contentKa.trim()){alert("Georgian content is required");return}let g=a.featuredImage;if(c){console.log("üì∏ Uploading image..."),p(!0);try{g=await y.uploadImage(c,`featured/${Date.now()}-${c.name}`),console.log("‚úÖ Image uploaded successfully:",g)}catch(A){console.error("‚ùå Image upload failed:",A),alert("Failed to upload image. Please try again.");return}}const w={...a,featuredImage:g,readTime:y.calculateReadTime(a.content),slug:a.slug||y.generateSlug(a.title)};console.log("üíæ Saving post data:",w),await t(w),console.log("‚úÖ Post saved successfully!")}catch(g){console.error("‚ùå Error saving post:",g),g instanceof Error?alert(`Failed to save post: ${g.message}`):alert("Failed to save post. Please check the console for details.")}finally{p(!1)}},b=x=>{var w;const g=(w=x.target.files)==null?void 0:w[0];if(g){n(g);const A=new FileReader;A.onload=R=>{var k;u((k=R.target)==null?void 0:k.result)},A.readAsDataURL(g)}};return e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (English) *"}),e.jsx("input",{type:"text",value:a.title,onChange:x=>{const g=x.target.value;l(w=>({...w,title:g,slug:y.generateSlug(g)}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] transition-colors duration-200",placeholder:"Enter post title in English",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Georgian) *"}),e.jsx("input",{type:"text",value:a.titleKa,onChange:x=>l(g=>({...g,titleKa:x.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] transition-colors duration-200",placeholder:"·É®·Éî·Éò·Éß·Éï·Éê·Éú·Éî·Éó ·Éû·Éù·É°·É¢·Éò·É° ·É°·Éê·Éó·Éê·É£·É†·Éò ·É•·Éê·É†·Éó·É£·Éö·Éê·Éì",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Content"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (English) *"}),e.jsx("textarea",{value:a.content,onChange:x=>l(g=>({...g,content:x.target.value})),className:"w-full h-64 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] transition-colors duration-200 resize-vertical",placeholder:"Write your blog post content in English...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (Georgian) *"}),e.jsx("textarea",{value:a.contentKa,onChange:x=>l(g=>({...g,contentKa:x.target.value})),className:"w-full h-64 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#309f69] focus:border-[#309f69] transition-colors duration-200 resize-vertical",placeholder:"·Éì·Éê·É¨·Éî·É†·Éî·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·Éë·Éö·Éù·Éí ·Éû·Éù·É°·É¢·Éò·É° ·É®·Éò·Éú·Éê·Éê·É†·É°·Éò ·É•·Éê·É†·Éó·É£·Éö·Éê·Éì...",required:!0})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Featured Image"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#309f69] file:text-white hover:file:bg-[#267553]"}),o&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:o,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-300"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx(d.button,{type:"submit",disabled:i||h,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 sm:flex-none px-8 py-3 bg-gradient-to-r from-[#309f69] to-[#2ff9c3] text-white rounded-lg font-medium hover:shadow-lg transition-shadow duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i||h?"Saving...":r?"Update Post":"Create Post"}),e.jsx(d.button,{type:"button",onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 sm:flex-none px-8 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors duration-200",children:"Cancel"})]})]})},ue=()=>{const[r,t]=m.useState(!1),s=I(),i=async l=>{t(!0);try{await y.createBlogPost(l),s("/admin/posts")}catch(c){throw console.error("Error creating post:",c),c}finally{t(!1)}},a=()=>{window.confirm("Are you sure you want to cancel? Any unsaved changes will be lost.")&&s("/admin/posts")};return e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Post"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Write a new blog article for your website"})]}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"‚Üê Back to Posts"})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(ge,{onSave:i,onCancel:a,loading:r})})]})})},Ne=Object.freeze(Object.defineProperty({__proto__:null,AdminNewPost:ue},Symbol.toStringTag,{value:"Module"})),xe=()=>e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage blog post categories"})]})}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üèóÔ∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Category management feature is under development."}),e.jsx("p",{className:"text-sm text-gray-500",children:"For now, you can add categories directly when creating blog posts."})]})]})}),Pe=Object.freeze(Object.defineProperty({__proto__:null,AdminCategories:xe},Symbol.toStringTag,{value:"Module"})),he=({children:r})=>{const[t,s]=m.useState(null),[i,a]=m.useState(!0);return m.useEffect(()=>{const l=v.onAuthStateChange(c=>{s(c),a(!1)});return()=>l()},[]),i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-[#309f69] mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Loading..."})]})}):!t||!v.isAdmin(t)?e.jsx(M,{to:"/admin/login",replace:!0}):e.jsx(e.Fragment,{children:r})},Ae=Object.freeze(Object.defineProperty({__proto__:null,ProtectedRoute:he},Symbol.toStringTag,{value:"Module"}));export{we as A,Ae as P,je as a,y as b,ve as c,Ne as d,Pe as e,B as l};
